# 日時指定部分のドロップダウン併用実装 - 要件ファイル

## 1. 概要
Slackリマインダー生成アプリの日時指定部分（`[when]`パラメータ）について、現在のテキスト入力のみの実装から、ドロップダウンを併用した直感的なUIに改善する。

## 2. 機能要件

### 2.1 入力モードの切り替え
- ユーザーは以下の4つの入力モードを切り替えて使用できる
  - **クイック選択モード**: よく使う時間パターンをドロップダウンから選択
  - **カレンダーモード**: カレンダーと時刻選択を使った具体的な日時指定
  - **繰り返しモード**: 定期的なリマインダーパターンの選択
  - **カスタムモード**: 既存の日本語テキスト入力（現在の実装を維持）

### 2.2 クイック選択モード
- 相対時間の選択肢
  - 10分後、15分後、30分後、45分後
  - 1時間後、2時間後、3時間後、6時間後
  - 明日の朝（9:00）、明日の昼（12:00）、明日の夕方（18:00）
- 選択した内容は即座に英語形式（例: "in 30 minutes"）に変換される

### 2.3 カレンダーモード
- 日付選択
  - カレンダーUIから日付を選択
  - 過去の日付は選択不可
  - 最大3ヶ月先まで選択可能
- 時刻選択
  - ドロップダウンで時刻を選択（30分刻み）
  - 00:00〜23:30の選択肢を提供
- 選択結果は "at HH:MM on MM/DD/YYYY" 形式に変換

### 2.4 繰り返しモード
- 頻度の選択
  - 毎日（every day）
  - 平日のみ（every weekday）
  - 毎週特定曜日（every [曜日]）
  - 隔週特定曜日（every other [曜日]）
  - 毎月特定日（on the [日]th of every month）
- 時刻の指定
  - ドロップダウンで時刻を選択（30分刻み）
- 複数曜日の選択
  - チェックボックスで複数の曜日を選択可能
  - 例: 月曜日と水曜日 → "every Monday and Wednesday"
- 隔週設定
  - 「隔週」チェックボックスで有効化
  - 例: 隔週金曜日 → "every other Friday"
  - 例: 隔週月曜日と水曜日 → "every other Monday and Wednesday"

### 2.5 カスタムモード
- 既存の実装を維持
- 日本語テキストを入力すると自動的に英語形式に変換
- 変換ルールは現在のtimePatterns.tsを使用

## 3. UI/UX要件

### 3.1 モード切り替え
- タブまたはセグメントコントロールでモードを切り替え
- 選択中のモードが視覚的に明確にわかる
- モードを切り替えても入力内容は保持される（可能な限り）

### 3.2 リアルタイム変換表示
- どのモードでも、選択・入力した内容は即座に英語形式で表示
- 変換結果は目立つように表示（背景色や枠線で強調）

### 3.3 エラー表示とバリデーション
- 無効な選択や入力に対してエラーメッセージを表示
- 他ユーザーへの繰り返し設定など、Slackの制限事項を警告

### 3.4 アクセシビリティ
- キーボード操作で全ての機能にアクセス可能
- スクリーンリーダー対応
- 適切なARIAラベルの設定

## 4. 技術要件

### 4.1 使用するライブラリ
- shadcn/ui のコンポーネント
  - Select（ドロップダウン）
  - Calendar（日付選択）
  - Tabs（モード切り替え）
  - Checkbox（複数選択）
- 既存のReact、TypeScript環境を維持

### 4.2 互換性
- 既存のtimeConverter.tsとの互換性を保つ
- commandGenerator.tsへの影響を最小限にする

## 5. 制約事項

### 5.1 Slack仕様による制約
- [when]パラメータは英語形式のみ対応
- 他ユーザーへの繰り返しリマインダー不可
- 時間単位の繰り返し不可（日単位以上のみ）

### 5.2 実装上の制約
- 既存のコードベースとの整合性を保つ
- パフォーマンスへの影響を最小限にする
- バンドルサイズの増加を抑える

## 6. 成功基準
- ユーザーが3クリック以内で基本的な日時指定ができる
- 全ての入力モードで正しい英語形式への変換が行われる
- 既存の機能が全て維持される
- エラー率が現在の実装より低下する