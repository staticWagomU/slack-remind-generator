## Slackリマインダーコマンド生成アプリ コア仕様書

このドキュメントは、Slackの `/remind` コマンドを生成するWebアプリケーションのコア機能に関する仕様を定義します。

### 1. コマンド基本構造

生成するコマンドは、以下の基本構造に従います。各パラメータは半角スペースで区切られます。

```
/remind [who] [what] [when]
```


### 2. `[who]` パラメータ仕様（通知先）

ユーザーが選択可能な通知先（`[who]`）は以下の通りです。

| 対象 | パラメータ | 説明 |
| :--- | :--- | :--- |
| 自分自身 | `me` | コマンド実行者のSlackbotに非公開で通知されます。 |
| 他ユーザー | `@username` | 指定したユーザーのSlackbotに直接通知されます。 |
| チャンネル | `#channel` | 指定したチャンネルに公開メッセージとして投稿されます。 |

**重要仕様**:
チャンネル（`#channel`）を通知先に指定した場合、リマインダーを設定した**瞬間に**、「リマインダーを設定しました」という確認メッセージがそのチャンネルに**公開で投稿されます**。この挙動はサプライズ企画など、事前の情報開示を避けたいケースには不向きであるため、アプリのUI上でユーザーへの注意喚起が必要です。

-----

### 3. `[what]` パラメータ仕様（メッセージ内容）

リマインダーの本文（`[what]`）は、以下の要素をサポートする必要があります。

  - 言語: 日本語を含む多言語に対応します。
  - 書式: 複数行のテキスト入力を許可します。改行もリマインダーメッセージに反映されます。
  - メンション: `@username` や `@here` などのメンションを本文に含めることができます。

-----

### 4. `[when]` パラメータ仕様（日時指定）

リマインダーのタイミング（`[when]`）を指定するパラメータです。

**絶対要件**:
`[when]` パラメータは**英語形式**で記述する必要があります。日本語（例：「明日」）はSlackに解釈されません。

#### 4.1. 日時指定のパターン

アプリは以下のパターンに対応した日時文字列を生成する必要があります。

| カテゴリ | 構文例 | 説明 |
| :--- | :--- | :--- |
| 相対指定 | `in 10 minutes` / `in 3 hours` | 「X分後」「X時間後」など、現在を基準とした指定。 |
| 絶対指定 | `at 17:15` / `at 5:15pm` | 特定の時刻を指定。 |
| | `on 10/31/2025` / `on October 31` | 特定の日付を指定。推奨形式は `MM/DD/YYYY`。 |
| | `at 3pm on 9/28/2025` | 日付と時刻の組み合わせ。 |
| 自然言語 | `tomorrow` / `Monday` / `on Tuesday` | 「明日」や「次の月曜日」といった指定。 |

**自動補完ロジック**:
Slackは、当日の過ぎた時刻（例：午前11時に `at 9:00am`）を指定すると、自動的に**翌日の同時刻**にスケジュールします。この「未来優先」の挙動を前提として仕様を設計します。

**デフォルト時刻**:
日付のみを指定し時刻を省略した場合（例: `tomorrow`）、リマインダーはユーザーのタイムゾーンにおける**午前9時**に設定されます。このデフォルト時刻は個々のユーザーがSlack設定で変更可能です。

-----

### 5. 繰り返しリマインダーの仕様

`every` キーワードを用いて、定期的なリマインダーを生成します。

| 目的の繰り返し | `[when]` パラメータ構文例 |
| :--- | :--- |
| 毎日 | `at 10:00am every day` |
| 平日のみ | `at 9:30am every weekday` ※祝日は考慮されません |
| 特定の曜日 | `at 1pm every Friday` |
| 複数の曜日 | `at 9am every Monday and Wednesday` |
| 隔週 | `at 12pm every other Friday` |
| 毎月特定の日 | `on the 15th of every month` |
| 毎月特定の週と曜日 | `every first Monday` |
| 毎月末の平日 | `every last weekday` |

-----

### 6. 主要な制約事項（アプリ設計上の注意点）

以下の制約は、Slackの `/remind` コマンド固有のものであり、アプリの仕様やUI/UXに影響を与えます。

1.  **編集機能なし**: 一度設定したリマインダーは編集できません。変更するには「既存のリマインダーを削除し、新しいものを再作成する」というワークフローが必須となります。
2.  **他者への繰り返し不可**: `@username` に対して繰り返しリマインダー（例: `every day`）を設定することはできません。繰り返しが可能なのは `me` と `#channel` のみです。
3.  **時間単位の繰り返し不可**: 「1時間ごと」のような、日をまたがない高頻度の繰り返しはサポートされていません。
4.  **管理の煩雑さ**: リマインダーは `/remind list` コマンドで一覧表示・削除しますが、数が増えると管理が煩雑になります。アプリ側で生成したコマンドの履歴を保持するなどの補助機能が考えられます。
5.  **過去メッセージの削除不可**: リマインダーの「スケジュール」を削除しても、過去にチャンネルへ投稿されたリマインダー「メッセージ」自体は削除されません。
